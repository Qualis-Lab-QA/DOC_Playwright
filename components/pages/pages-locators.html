<section class="section-content">
  <h1 class="section-title"> Pages y Locators</h1>

  <p class="section-paragraph">
    En esta secci贸n documentamos la estructura y organizaci贸n del patr贸n Page Object implementado en el framework. 
    Esta convenci贸n permite mantener las acciones automatizadas desacopladas de los selectores, promoviendo el 
    mantenimiento y la escalabilidad del c贸digo de automatizaci贸n.
  </p>
  
  <p class="section-paragraph">
    Cada pantalla o flujo funcional se representa mediante una clase con m茅todos reutilizables que encapsulan interacciones 
    con la UI. Los elementos utilizados se definen en archivos separados llamados <code>locators.js</code>, lo que permite 
    mantener el c贸digo limpio y de f谩cil actualizaci贸n ante cambios visuales en la aplicaci贸n.
  </p>
  
  <p class="section-paragraph">
    A continuaci贸n, se describe la estructura general esperada, la forma correcta de declarar m茅todos reutilizables con par谩metros 
    din谩micos y c贸mo estas clases interact煤an con los pasos de prueba definidos en Gherkin.
  </p>

  <h2 class="text-xl font-bold mb-4">Estructura General</h2>
  <pre><code class="plaintext">Ejemplo:

src/
 pages/
     {secci贸n}/
         {page}.js (clase de p谩gina)
         locators.js (localizadores de elementos)

_____________________________________________________
Ejemplo con datos:

src/
 pages/
     cheques/
         solicitar.js (clase de p谩gina)
         locators.js (localizadores de elementos)
</code></pre>

  <h2 class="text-xl font-bold mt-10 mb-4">Organizaci贸n de las Clases</h2>
  <p class="section-paragraph">Cada archivo <code>{page}.js</code> representa una secci贸n funcional del sistema, incluyendo:</p>
  <ul class="section-paragraph">
    <li>M茅todos simples: Interacciones b谩sicas (clics, inputs, etc.).</li>
    <li>M茅todos compuestos: Flujos que combinan m煤ltiples interacciones.</li>
  </ul>

  <pre><code class="language-javascript">const elements = require('./locators').solicitarLocators;
const btn = elements.btn;
const input = elements.input;
const select = elements.select;

class Solicitar {
    async clickCheques() {
        await btn.cheques().click();
    }

    async clickSolicitar() {
        await btn.solicitar().click();
    }
}

module.exports = new Solicitar();</code></pre>

  <h3 class="text-lg font-semibold mt-10 mb-4">2. Localizadores (locators.js)</h3>
  <p class="section-paragraph">Archivo que define todos los elementos de la p谩gina, agrupados por tipo de componente.</p>

  <pre><code class="language-javascript">let solicitarLocators = {
  btn: {
      cheques: () => page.locator('span', { hasText: 'Cheques' }),
      solicitar: () => page.locator('div >> text="solicitar"')
  },
  input: {
      token: () => page.locator('input')
  }
};

module.exports = { solicitarLocators };</code></pre>

  <h2 class="text-xl font-bold mt-10 mb-4">Funciones con Par谩metros</h2>
  <p class="section-paragraph">
    Algunas funciones dentro de las clases reciben par谩metros din谩micos. Estos par谩metros pueden ser completados m谩s adelante desde archivos Gherkin. Aqu铆 mostramos c贸mo declarar correctamente este tipo de funciones dentro del Page.
  </p>

  <pre><code class="language-javascript">async fillToken(token) {
  await input.token().fill(token);
}</code></pre>

  <p class="section-paragraph">Ejemplo de c贸mo se genera el llamado desde el Step Definition:</p>
  <pre><code class="language-javascript">When(/^Ingresamos el token: (.*)$/, async (token) => {
  await solicitar.fillToken(token);
});</code></pre>

  <p class="section-paragraph">Y el ejemplo de Step en el archivo Gherkin:</p>
  <pre><code class="language-bash">When Ingresamos el token: 123456</code></pre>

  <p class="section-paragraph">
    De esta manera, el valor din谩mico ser谩 pasado autom谩ticamente a la funci贸n definida en la Page.
  </p>

  <h2 class="text-xl font-bold mt-10 mb-4">Notas Adicionales</h2>
  <ul class="section-paragraph">
    <li>Cuando se escriba <code>await page.</code> dentro de una funci贸n, se habilitar谩 el autocompletado de funciones y selectores nativos de Playwright.</li>
    <li>
      Para m谩s informaci贸n sobre los comandos disponibles de Playwright, consultar:
      <ul class="section-paragraph ml-4">
        <li><a href="https://playwright.dev/docs/locators" class="text-blue-600 underline" target="_blank">Documentaci贸n oficial - Locators</a></li>
      </ul>
    </li>
  </ul>
</section>
